Программный диспетчерский комплекс системы обеспечения индивидуальной безопасности (ПДК «СОИБ-Д») предназначен для демонстрации функций системы, связанных с наблюдением за состоянием здания, мониторинга процесса эвакуации при возникновении чрезвычайной ситуации (ЧС), ведения журнала в режиме «черного ящика» и отправки сообщений о тревоге в органы спасения.

1. Системные требования.
Для работы ПДК «СОИБ-Д» должны быть выполнены следующие требования к ЭВМ диспетчера:
* Процессор не хуже Pentium 4 1,7 МГц
* Оперативная память не менее 1 Гб
* Операционная система Windows XP SP2, Windows Server 2003 SP1, Windows Vista, Windows 7, Windows 8; Linux с версией ядра не менее 2.6.32 и графической средой;
* Современный веб-браузер. Разработчиком гарантируется стабильная работа системы в браузере Mozilla Firefox версии не менее 21.0. 

2. Установка.
2.1. Linux
Для установки ПДК «СОИБ-Д» в операционной системе Linux необходимо:
* Войти в систему под именем пользователя, имеющего право выполнять команды с полномочиями суперпользователя посредством программы sudo.
* Проверить наличие папки */opt* в корневой системе, при необходимости создать данную папку.
* Запустить исполняемый файл «SINAPS-linux32-offline» для 32-битных систем или файл «SINAPS-linux64-offline» для 64-битных систем.
* В появившемся окне ввести пароль *текущего* пользователя.
* Дождаться завершения установки.
2.2. Windows
Для установки ПДК «СОИБ-Д» в операционной системе Windows необходимо запустить программу «SINAPS-windows32-offline.exe» для 32-битных систем или файл «CEMS-windows64-offline.exe» для 64-битных систем и дождаться завершения установки.

3. Первоначальная настройка.
По умолчанию после установки система настроена на работы с портом 8089. Если это порт занят другим приложением, необходимо изменить его через *текстовый файл настроек*.

4. Использование ПДК «СОИБ-Д».
4.1. Запуск.
ПДК «СОИБ-Д» представляет собой программное обеспечение с клиент-серверной архитектурой и состоит из двух частей: кроссплатформенного серверного приложения «СОИБ-Д» и клиентского веб-интерфейса.
4.1.1. Серверное приложение.
Процедура запуска серверного приложения зависит от используемой операционной системы:
* Для операционной системы Linux: запустить расположенный в директории */opt/JWrapper-SINAPS* исполняемый файл «SINAPSLinLauncher64» для 64-битных систем или «SINAPSLinLauncher32» для 32-битных систем.
* Для операционной системы Windows: в меню «Пуск» в подменю «SINAPS» выбрать пункт «SINAPS».
При запуске серверное приложение отображает на экране окно с консолью. Внешний вид запущенного серверного приложения представлен на рисунке. Сообщения, выводимые на консоль, предназначены для целей отладки в случае возникновения неисправностей; при нормальной работе системы окно серверного приложения можно свернуть.
4.1.2. Клиентский веб-интерфейс.
Доступ к клиентскому веб-интерфейсу осуществляется через браузер. Клиентский веб-интерфейс может быть запущен как на той же ЭВМ, на которой запущено серверное приложение, так и на любой другой ЭВМ в пределах локальной сети. Для запуска клиентского веб-интерфейса необходимо открыть браузер и перейти по адресу:
http://server_addess:8080/control.html
где вместо «server_address» необходимо подставить IP-адрес ЭВМ, на которой запущена серверное приложение, или *localhost*, если клиентский веб-интерфейс должен быть запущен на той же ЭВМ, что и серверное приложение.
При запуске включается веб-интерфейс включается в режиме мониторинга. Также веб-интерфейс может работать в режиме журнала. Назначение данных режимов, а также способ использования каждого из них описаны далее.
4.2. Режим мониторинга
Режим мониторинга предназначен для оперативной оценки обстановки диспетчером ситуации на объекте, получения информации о состоянии датчиков и количестве посетителей и сотрудников в каждом из помещений объекта.
Внешний вид клиентского веб-интерфейса в режиме мониторинга изображен на рисунке.
Назначение элементов клиентского веб-интерфейса:
* Панель управления:
** Кнопки выбора режима | Переключение между режимом мониторинга и режимом журнала.
** Панель статуса объекта | Отображение информации об общем состоянии объекта и количестве сотрудников и посетителей различных типов, находящихся на объекте.
** Список для выбора объектов | Переключение между объектами, в случае если ПДК «СОИБ-Д» используется для мониторинга сразу нескольких объектов.
** Панель действий:
*** Объявить тревогу | Ручной перевод системы в режим тревоги.
*** Сформировать отчет | Создание файла отчета с информациях о зафиксированных событиях и предпринятых действиях для передачи в Управление МЧС.
*** Изменить настройки | См. раздел «Изменение настроек».
* План объекта. Схематичное интерактивное изображение внутренней структуры объекта. На плане приняты следующие условные обозначения:
** Датчик
** Огнетушитель
** Пожарный кран
** Выход
** Телефон для использования при пожаре (в том числе телефон прямой связи с пожарной охраной)
** Направление движения при эвакуации
На плане объекта для каждого помещения указывается количество человек, которые, по данным системы, находятся в данном помещении. Нажатие мыши на любую точку помещения на плане объекта включает или выключает вывод информации по данному помещению на панели детальной информации. Светло-голубая заливка помещения означает, что информация по данному помещению выводится в настоящий момент.
* Панель детальной информации. Диспетчер может выбрать до 4 помещений, для каждого из которых будет выводиться панель со следующими данными:
** Степень опасности, которую представляет для людей нахождение в данном помещении в текущий момент. Данный показатель определяется на основании показаний датчиков в помещении. Степень опасности отображается в графе «Состояние», а также кодируется цветом, в который окрашивается панель, соответствующая данному помещению:
*** Серый | Безопасно
*** Желтый | Средняя степень опасности
*** Красный | Высокая степень опасности
4.3. Режим журнала
Режим журнала предназначен для просмотра информации обо всех событиях, зарегистрированных системой, с целью повседневного контроля работы системы, анализа сценариев развития произошедших чрезвычайных ситуаций, а также обнаружения и анализа причин некорректной работы системы. Регистрация новых событий в журнал осуществляется только если в настройках системы включена служба «Logger» (по умолчанию включена непосредственно после установки, о способе включения и отключения служб см. раздел «Изменение настроек»). Внешний вид клиентского веб-интерфейса в режиме журнала изображен на рисунке.
Данные обо всех зарегистрированных системой событиях вносятся в таблицу со следующими колонками:
* № | Уникальный номер события
* Дата | Дата регистрации события
* Время | Время регистрации события
* Место | Место возникновения события
* Описание | Детальное описание события
Строки таблицы могут выделяться цветом в зависимости от степени важности соответствующих событий.
* Желтый | Событие требует повышенного внимания диспетчера
* Красный | Событие требует немедленной реакции диспетчера
Элементы панели управления в режиме журнала имеют то же самое назначение, что и в режиме мониторинга.
4.4. Изменение настроек
4.4.1. Общие сведения
В состав ПДК «СИНАПС-Д» входит несколько служб, каждая из которых обеспечивает выполнение той или иной функции системы. При необходимости, диспетчер может включить или отключить любую из служб. Например, для пробного запуска системы могут быть отключены службы, отвечающие за сбор данных из сенсорной сети. Некоторые из служб обладают параметрами, значения которых могут быть изменены диспетчером.
4.4.2. Описание служб
Название | Назначение | Параметры | Примечание
MeshLogic | Получение информации от сенсорной сети на базе модулей MeshLogic | MeshLogic.comPort Последовательный порт, к которому подключен модуль сенсорной сети (например, /dev/ttyUSB1 для ОС Linux, COM12 для ОС Windows).
MeshLogic.baudrate Скорость последовательного порта (обычно 115200). | По умолчанию после установки отключена.
TimerStateChanger | Автоматическое объявление общей тревоги при срабатывании любого из датчиков в случае отсутствия реакции диспетчера в течение заданного промежутка времени. | Delay: Промежуток времени между срабатыванием датчика и объявлением общей тревоги |
Logger | Запись в журнал всех событий, регистрируемых системой. | Нет | 
Bluetooth | Эмуляция носимого устройства средствами ЭВМ, на которой запущено серверное приложение. Для работы службы требуется наличие встроенного или внешнего модуля Bluetooth. | Bluetooth.comPort Виртуальный последовательный порт, соответствующий модулю Bluetooth (например, /dev/ttyUSB0 для ОС Linux, COM11 для ОС Windows).
Bluetooth.baudrate Скорость виртуального последовательного порта (обычно 115200).
4.4.3. Настройка через веб-интерфейс.
Для вызова окна настроек необходимо выбрать пункт «Изменить настройки» на панели действий. Включение и отключение служб производится путем установки флажков напротив названий этих служб: установленный флажок означает, что после сохранения настроек служба будет включена, снятный — отключена. Значения параметров служб изменяются в соответствующих текстовых полях.
Для применения изменений в настройках необходимо нажать кнопку «Сохранить» и перезапустить ПДК «СИНАПС-Д».
4.4.4. Настройка через конфигурационный файл.
Для изменения настроек данным способом необходимо открыть конфигурационный файл dispatcher.conf, расположение которого зависит от операционной системы:
* Для ОС Linux: директория /opt/JWrapper-SINAPS/JWrapper-SINAPS-{номер_версии}-complete/
* Для ОС Windows: папка C:\ProgramData\JWrapper-SINAPS\JWrapper-SINAPS-{номер_версии}-complete\
Конфигурационный файл состоит из строк, имеющих следующий формат:
Название_параметра Значение_параметра
Строки, название параметра для которых совпадает с названием службы, отвечают за включение и отключение соответствующих служб. Для включения службы необходимо указать значение параметра «enabled», для отключения — «disabled».
Через конфигурационный файл возможно изменение номера порта, на котором будет запускаться серверное приложение. Соответствующее название параметра — Jetty.port.
Для применения изменений в настройках необходимо изменить файл и перезапустить ПДК «СИНАПС-Д».


5. Удаление из операционной системы
5.1. Linux
Для удаления ПДК «СОИБ-Д» из операционной системы Linux необходимо удалить директорию */opt/JWrapper-SINAPS*.
5.2. Windows
Для удаления ПДК «СОИБ-Д» из операционной системы Windows необходимо в меню «Пуск» в подменю «SINAPS» выбрать пункт «Uninstall SINAPS».

6. Действия при обнаружении ошибок.
При обнаружении ошибок, неточностей и других фактов некорректной работы ПДК «СИНАПС-Д» необходимо сообщить об этом разработчикам, нажав на кнопку «Связаться с разработчиками», в появившемся окне введя сопроводительное сообщение, содержащее суть проблемы и последовательность действий, которая позволяла бы ее воспроизвести, после чего нажать на кнопку «Отправить сообщение».
В случае неработоспособности веб-интерфейса необходимо связаться с разработчиками по электронной почте по адресу 070@niir.ru.

7. Часто задаваемые вопросы и ответы на них (FAQ).
Данный раздел будет дополняться по мере возникновения вопросов.
